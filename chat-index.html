<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>DELTA-5o Chatbot</title>
    <link href="Logo2.png" rel="icon" type="image/png" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@32,400,0,0"
        rel="stylesheet" />
    <link href="chat-main.css" rel="stylesheet" />
</head>

<body>
    <div class="container">
        <header class="app-header">
            <button class="delete-chat-btn" id="delete-chat-btn" title="Delete all chats">
                <span class="material-symbols-rounded" id="delete-icon">delete</span>
            </button>
            <h1 class="heading">DELTA-5o</h1>
            <h4 class="sub-heading">ask me anything!</h4>
            <button class="theme-toggle-btn" id="theme-toggle-btn" title="Toggle dark/light mode">
                <span class="material-symbols-rounded" id="theme-icon">dark_mode</span>
            </button>
        </header>
        <div class="chats-container"></div>
        <div class="prompt-container">
            <div class="prompt-wrapper">
                <form action="#" class="prompt-form">
                    <input class="prompt-input" placeholder="Ask Delta..." required="" type="text" />
                    <div class="prompt-actions">
                        <!-- File Upload Wrapper -->
                        <div class="file-upload-wrapper">
                            <img class="file-preview" src="#" />
                            <input accept="image/*, .pdf, .txt, .csv" hidden="" id="file-input" type="file" />
                            <button class="material-symbols-rounded" id="add-file-btn" type="button"
                                title="attach file">attach_file</button>
                        </div>
                        <button class="material-symbols-rounded" id="stop-response-btn" type="button"
                            title="Stop response">stop_circle</button>
                        <button class="material-symbols-rounded" id="web-search-btn" title="Search the web with AI"
                            type="button">travel_explore</button>
                        <button class="send-btn" id="send-prompt-btn">Send</button>

                    </div>
                </form>
            </div>
            <p class="disclaimer-text">Delta can make mistakes, so double-check it.</p>
        </div>
    </div>
    <script src="chat-script.js"></script>
    <script>
        document.getElementById("web-search-btn").addEventListener("click", async () => {
            const input = document.querySelector(".prompt-input");
            const query = input.value.trim();
            if (!query) return;


            const searchURL = `https://www.googleapis.com/customsearch/v1?key=AIzaSyBOC4SO9fCB6bu2B8diFnurROfpnxtO2mI&cx=a02c9ae0b98a14661&q=${encodeURIComponent(query)}`;
            const res = await fetch(searchURL);
            const data = await res.json();
            const snippets = data.items?.map(item => `â€¢ ${item.title}: ${item.snippet}`).join("\n\n") || "No results.";


            window.webSearchContext = snippets;
            window.useWebSearchContext = true;


            document.querySelector(".prompt-form").dispatchEvent(new Event("submit"));
        });
    </script>
</body>

</html>